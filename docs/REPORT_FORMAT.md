# HVAC Analysis Report Format - Industry Standard

## Overview

This document describes the comprehensive, professional HVAC industry standard report format generated by the analysis pipeline. The enhanced report provides detailed engineering analysis, equipment recommendations, cost projections, and compliance verification.

## Report Version

**Current Version**: 2.0 - Professional HVAC Industry Standard
**Previous Version**: 1.0 - Basic deterministic report

## Report Structure

The analysis report contains 13 major sections providing comprehensive information for HVAC system design, selection, installation, and compliance:

### 1. Project Information (`project_info`)

Basic project identification and design parameters:
- Project name and location
- Climate zone (Minnesota Zone 7 default)
- Design temperatures (heating: -17°F, cooling: 89°F)
- Building type (residential, commercial, industrial)
- Total conditioned area
- Design humidity levels
- Data source

### 2. Load Calculations (`load_calculations`)

Detailed Manual J 8th Edition load calculations with component breakdown:

**Heating Load Breakdown:**
- Building envelope losses (50%)
- Infiltration air leakage (15%)
- Mechanical ventilation per ASHRAE 62.2 (20%)
- Duct losses and safety factor (15%)

**Cooling Load Breakdown:**
- Envelope sensible gains (37.5%)
- Infiltration sensible load (11.3%)
- Internal gains from occupants, lighting, appliances
- Latent load for humidity removal (25%)

**Additional Details:**
- Infiltration and ventilation analysis
- Internal heat gains breakdown
- Calculation methodology notes
- BTU/sqft ratios

### 3. Equipment Analysis (`equipment_analysis`)

Comprehensive equipment specifications and sizing:
- Proposed heating and cooling capacities
- Oversize percentages with code limits
- Equipment type and staging (single-stage, two-stage, modulating)
- Fuel type
- Manufacturer and model (when available)
- Efficiency ratings (AFUE, SEER)
- Airflow requirements (CFM, CFM/ton)
- Equipment tonnage
- Sizing recommendations per Manual S
- Efficiency notes for climate zone

### 4. Compliance Status (`compliance_status`)

Complete Minnesota HVAC code compliance assessment:
- Overall compliance status
- Equipment sizing compliance (MN Rules 1322.0403, 1322.0404)
- Ventilation compliance (ASHRAE 62.2)
- Duct insulation requirements (R-8 supply, R-6 return)
- Combustion air compliance
- Economizer requirements (>4.5 tons cooling)
- Freeze protection for Climate Zone 7

### 5. Executive Summary (`executive_summary`)

High-level overview for decision-makers:
- Project overview statement
- Key findings (6-8 bullet points)
- Critical items requiring attention
- Compliance summary
- Estimated project scope

**Purpose:** Provides quick overview for homeowners, contractors, and code officials.

### 6. Detailed Calculations (`detailed_calculations`)

In-depth engineering calculations with justification:

**Methodology:**
- Manual J 8th Edition (ACCA standard)
- Design conditions per ASHRAE Climate Zone 7

**Heating Calculations:**
- Envelope load with R-value notes
- Infiltration load at 0.15 ACH
- Ventilation load per ASHRAE 62.2
- Duct losses (10%)
- Safety factor (5%)
- BTU/sqft ratio

**Cooling Calculations:**
- Sensible vs latent split
- Sensible heat ratio (SHR)
- Required airflow (CFM)
- BTU/sqft ratio
- Internal gains contribution

### 7. Equipment Recommendations (`equipment_recommendations`)

Professional equipment selection guidance:

**Primary Recommendation:**
- System type with justification
- Capacity ranges (min-max per code limits)
- Specific recommended size
- Efficiency targets
- Control type (staging)
- Fuel type

**Alternative Options:**
Three equipment tiers with pros/cons:
1. **High-Efficiency Modulating System**
   - Pros: Best comfort, highest efficiency (97%+ AFUE, 18+ SEER), no oversize limits
   - Cons: Higher cost ($2-4K premium)
   - Recommended for: Maximum comfort and energy savings

2. **Two-Stage System**
   - Pros: Good comfort, very good efficiency (96% AFUE, 16 SEER)
   - Cons: Subject to oversize limits
   - Recommended for: Balance of cost and performance

3. **Single-Stage System**
   - Pros: Lowest initial cost
   - Cons: More cycling, strict oversize limits
   - Recommended for: Budget-conscious projects

**Required Accessories:**
- ERV/HRV for ventilation
- Programmable thermostat
- Humidifier
- Air filtration (MERV 11-13)
- Condensate pump
- Optional IAQ upgrades

**Installation Requirements:**
- Manual D duct design
- Duct leakage testing (<10%)
- Insulation requirements
- Electrical and gas code compliance
- Manufacturer clearances

### 8. Energy Efficiency Analysis (`energy_efficiency_analysis`)

Detailed energy consumption and cost projections:

**Annual Energy Consumption:**
- Heating energy (therms or kWh)
- Cooling energy (kWh)
- Estimated runtime hours (2,000 heating / 1,000 cooling)

**Estimated Annual Costs:**
- Heating cost at baseline efficiency
- Cooling cost at baseline efficiency
- Total annual HVAC cost
- Utility rate assumptions (MN average)

**High-Efficiency Savings:**
- Annual savings with 96% AFUE heating
- Annual savings with 16 SEER cooling
- Total annual savings
- Simple payback period (3-5 years)
- Lifetime savings (15-year equipment life)

**Carbon Emissions:**
- Annual CO₂ emissions (lbs)
- CO₂ reduction with high-efficiency equipment
- Emission factors for MN grid

### 9. Cost Analysis (`cost_analysis`)

Comprehensive project cost breakdown:

**Estimated Equipment Costs:**
- Base system installed ($12K-$30K+ depending on size)
- High-efficiency premium ($2K-$4K)
- ERV/HRV system ($2.5K-$4.5K)
- Duct modifications ($1.5K-$5K)
- Electrical upgrades ($500-$2K)
- Thermostat/controls ($200-$800)
- Total project range

**Financing and Incentives:**
- Federal tax credits (30% up to $2K-$8K)
- Minnesota utility rebates
- ENERGY STAR programs
- Low-interest financing options
- Home energy audit incentives

**Return on Investment:**
- Equipment life expectancy (15-20 years)
- Annual maintenance costs ($150-$300)
- Energy savings over equipment life
- Comfort improvements (non-monetary)
- Home value increase ($3K-$10K)

### 10. Recommendations (`recommendations`)

Actionable guidance organized by priority:

**Immediate Actions (6 items):**
- Obtain competitive bids
- Verify contractor credentials
- Request Manual J calculations
- Review code compliance
- Check warranties
- Schedule installation timing

**Design Recommendations (8 items):**
- Equipment selection criteria
- Efficiency specifications
- Ventilation system requirements
- Duct design requirements
- Insulation specifications
- Control system features
- Indoor air quality upgrades
- Climate-specific accessories

**Installation Best Practices (6 items):**
- Duct leakage testing
- Refrigerant charge verification
- Control commissioning
- Homeowner training
- Documentation requirements
- Follow-up service

**Maintenance Schedule (7 items):**
- Annual professional service
- Filter replacement schedule
- Coil cleaning
- Condensate drain maintenance
- ERV/HRV maintenance
- Ductwork inspection
- Seasonal adjustments

**Compliance Checklist (10 items):**
Complete code compliance verification with ✓ marks:
- Equipment sizing limits
- Efficiency minimums
- Ventilation requirements
- Duct insulation
- Leakage testing
- Combustion air
- Code compliance
- Permits and inspections

### 11. Report Metadata (`report_metadata`)

Professional documentation information:
- Report version (2.0)
- Generation timestamp
- Analysis methodology (Manual J/S/D)
- Applicable codes and standards:
  - Minnesota Rules Chapter 1322
  - Minnesota Energy Code
  - International Mechanical Code
  - National Fuel Gas Code
  - National Electric Code
  - ASHRAE 62.2, 90.1
- Professional standards (ACCA Manuals)
- Legal disclaimer

### 12. Confidence Score (`confidence_score`)

Analysis confidence rating (0.0 - 1.0):
- 0.7 = Moderate-high confidence with conservative assumptions
- Score reflects quality of extracted data and engineering assumptions

### 13. Reasoning (`reasoning`)

Engineering analysis notes:
- Methodology explanation
- Data sources
- Assumptions made
- Extracted text excerpt

## Key Improvements from Version 1.0

### Enhanced Detail
- **Load Calculations**: Added percentage breakdowns and detailed notes for each component
- **Equipment Analysis**: Added tonnage, staging details, efficiency recommendations
- **Compliance**: Expanded from basic status to comprehensive code citations

### New Professional Sections
1. **Executive Summary**: Decision-maker overview with key findings
2. **Detailed Calculations**: In-depth engineering justification
3. **Equipment Recommendations**: Three-tier options with pros/cons
4. **Energy Efficiency Analysis**: Annual costs, savings, ROI projections
5. **Cost Analysis**: Equipment costs, incentives, financing options
6. **Comprehensive Recommendations**: Actionable guidance organized by phase

### Industry Standards Compliance
- ACCA Manual J, S, D methodologies
- Minnesota HVAC Code (Chapter 1322)
- ASHRAE standards (62.2, 90.1)
- Professional documentation practices

### Decision Support
- **Alternative Options**: Compare single-stage vs two-stage vs modulating
- **Financial Analysis**: Energy savings, payback period, lifetime costs
- **Compliance Guidance**: Complete checklist with code citations

## Usage in Application

### Frontend Display

The enhanced report structure enables rich, interactive displays:

```typescript
// Access executive summary for dashboard
const summary = report.executive_summary;

// Display key findings as bullet points
summary.key_findings.map(finding => <li>{finding}</li>);

// Show cost ranges
const costs = report.cost_analysis.estimated_equipment_costs;

// Display equipment alternatives as cards
report.equipment_recommendations.alternative_options.map(option => 
  <EquipmentCard 
    title={option.option}
    pros={option.pros}
    cons={option.cons}
  />
);
```

### PDF Export

All sections are structured for professional PDF generation:
- Executive summary on page 1
- Detailed calculations in appendix
- Equipment recommendations with comparison tables
- Cost analysis with charts
- Compliance checklist as printable form

### API Response

The complete report is returned as JSON in the `AnalyzeResponse.report` field:

```json
{
  "report": "{...comprehensive JSON...}",
  "request_id": "req-abc123",
  "pages_processed": 5,
  "processing_time_seconds": 45.2
}
```

## Benefits of Enhanced Format

### For Homeowners
- **Clear Executive Summary**: Understand the project at a glance
- **Cost Transparency**: Know what to expect for equipment and installation
- **Energy Savings**: See actual dollar savings projections
- **Financing Options**: Understand available incentives and rebates

### For HVAC Contractors
- **Professional Presentation**: Industry-standard report format
- **Engineering Justification**: Detailed calculations support design decisions
- **Code Compliance**: Complete checklist ensures permit approval
- **Competitive Advantage**: Comprehensive analysis differentiates from competitors

### For Code Officials
- **Complete Documentation**: All required information for permit review
- **Code Citations**: Direct references to applicable rules
- **Calculation Details**: Verify design methodology and assumptions
- **Compliance Checklist**: Quick verification of all requirements

### For Engineers
- **Manual J/S/D Methodology**: Industry-standard calculation methods
- **Component Breakdown**: Detailed load contribution analysis
- **Alternative Analysis**: Compare equipment options systematically
- **Professional Standards**: ACCA and ASHRAE compliant

## Future Enhancements

Potential additions to version 3.0:
- Visual load diagrams and charts
- Interactive equipment comparison tools
- Real-time utility rate integration
- Climate-specific design guidance
- Custom branding for contractors
- Multi-language support
- Mobile-optimized layout

## Technical Implementation

### Report Generation
Location: `backend/utils.py::construct_report_from_extracted_text()`

The function:
1. Extracts numerical data from vision model output
2. Applies engineering heuristics and Manual J methodology
3. Calculates all load components with justification
4. Generates equipment recommendations within code limits
5. Projects energy costs and savings
6. Creates actionable recommendations
7. Validates compliance with Minnesota code
8. Formats as comprehensive JSON structure

### Data Flow
```
Vision Model → Extracted Text → construct_report_from_extracted_text() →
  → validate_hvac_analysis_output() → Enhanced Report JSON →
  → AnalyzeResponse → Frontend Display
```

### Validation
The `validate_hvac_analysis_output()` function ensures:
- Oversize calculations are accurate
- Compliance status reflects code limits
- Modulating equipment exemptions applied
- Airflow ratios are within acceptable ranges
- Load components sum correctly

## Conclusion

The Version 2.0 professional HVAC industry standard report format transforms basic analysis output into comprehensive, actionable engineering documentation. The enhanced structure provides all stakeholders—homeowners, contractors, code officials, and engineers—with the detailed information needed for informed decision-making and successful project execution.

The report follows ACCA standards, complies with Minnesota HVAC code, and presents information in a clear, professional format suitable for permitting, bidding, and customer communication.
