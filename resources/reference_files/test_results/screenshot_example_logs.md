
  VITE v6.4.1  ready in 474 ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://172.30.208.1:3000/
  ➜  Network: http://192.168.0.163:3000/
  ➜  press h + enter to show help
✅ AI Proxy Initialized. Model: gemini-2.5-flash

Server running at http://localhost:4000
Data Root: D:\AMD\secrets\hvac\extra\hvac\server\data
AI Provider: gemini (Active)
Mock Mode: DISABLED (live AI inference)
1:41:10 PM [vite] (client) page reload index.html
1:41:17 PM [vite] (client) hmr update /App.tsx
1:41:23 PM [vite] (client) page reload index.html
1:41:23 PM [vite] (client) hmr update /App.tsx
AI Vision Request -> model=gemini-2.5-flash imageSize=295368 mimeType=image/png responseMimeType=unset
AI Vision: retry settings -> attempts=2, baseDelayMs=800, exponential=true, timeoutMs=120000
AI Vision Response: PID
AI Vision Request -> model=gemini-2.5-flash imageSize=295368 mimeType=image/png responseMimeType=application/json
AI Vision: retry settings -> attempts=2, baseDelayMs=800, exponential=true, timeoutMs=120000
AI Vision Response: {
  "components": [
    {
      "id": "RV-025",
      "label": "RV 025",
      "type": "valve_pressure_relief",
      "bbox": [0.390, 0.190, 0.420, 0.220],
      "confidence": 1.0,
      "meta": {
   ...
[Stage 2] Job analysis-job-1-1767728644522 queued for document 1767728532541-e5jomssi5
[Stage 2] Job analysis-job-1-1767728644522 - Status: RUNNING
[Stage 2] Job analysis-job-1-1767728644522 - Minifying payload...
   [Minification] Token reduction: 94.4% (220442 → 12250 bytes)
   [Minification] Components: 45, Connections: 105, Ghosts filtered: 0
[Stage 2] Job analysis-job-1-1767728644522 - Minification complete in 3ms
[Stage 2] Job analysis-job-1-1767728644522 - Sending to AI (model: gemini-2.5-flash)...
[Stage 2] Job analysis-job-1-1767728644522 - Token budget: 3875 tokens (45 components × 75 + 500 base, cap: 4096)
[Stage 2] Job analysis-job-1-1767728644522 - Thinking budget: 6144 tokens
[Stage 2] Job analysis-job-1-1767728644522 - AI timeout configured: 180000ms
[Stage 2] Job analysis-job-1-1767728644522 - AI Response received in 19021ms
[Stage 2] Job analysis-job-1-1767728644522 - JSON parse error, attempting fallback extraction
[Stage 2] Job analysis-job-1-1767728644522 - Status: COMPLETED
[Stage 2] Job analysis-job-1-1767728644522 - Performance: Total=19028ms, AI=19021ms, Minify=3ms, DB=0ms
[Stage 2] Project default - Final report saved



Step 1: Classifying document...
classifier.ts:31 Classification cache hit
index.ts:34 ["Classification result:",{"type":"SCHEMATIC","confidence":1,"reasoning":"The document clearly displays numerous instrumentation symbols (circles, diamonds, and other standard P&ID symbols) and process flow lines, which are characteristic of a P&ID or control logic diagram. This directly matches the primary criterion for a SCHEMATIC classification."}]
index.ts:34 Step 2: Routing to pipeline...
index.ts:34 ["Selected pipeline:","visual"]
index.ts:34 Step 3: Executing pipeline...
visual.ts:79 Detecting blueprint type (P&ID vs HVAC)...
client.ts:40 [AI Client] Initialized in Proxy Mode. Forwarding to: http://localhost:4000
visual.ts:81 Blueprint type detected: PID
visual.ts:92 Using standard single-pass analysis
visual.ts:97 [Visual Pipeline] Applying enhancements...
visual-enhancements.ts:44 [Enhancement] Starting post-processing enhancements...
visual-enhancements.ts:51 [Enhancement] Normalizing component and connection types...
visual-enhancements.ts:54 [Enhancement] Type normalization complete
visual-enhancements.ts:59 [Enhancement] Applying spatial association to merge orphaned labels...
spatial-association.ts:330 [Spatial Association] Starting spatial association post-processing...
spatial-association.ts:196 [Spatial Association] Starting orphaned label detection...
spatial-association.ts:213 [Spatial Association] Found 0 orphaned labels, 0 unlabeled components, 45 already labeled
spatial-association.ts:220 [Spatial Association] No merging needed
spatial-association.ts:341 [Spatial Association] Post-processing complete in 1ms: 45 → 45 components (0 merged)
visual-enhancements.ts:68 [Enhancement] Spatial association complete: 0 orphaned labels merged, 45 total components remain
visual-enhancements.ts:77 [Enhancement] Applying strict geometric shape validation...
shape-validator.ts:411 [Shape Validator] Starting shape validation...
shape-validator.ts:445 [Shape Validator] All components passed shape validation
shape-validator.ts:462 [Shape Validator] Validation complete: 0/45 validated, 0 corrected
visual-enhancements.ts:80 [Enhancement] Shape validation complete: 0 components corrected
visual-enhancements.ts:87 [Enhancement] Detecting ISA functions...
visual-enhancements.ts:92 [Enhancement] ISA detection complete: 36/45 components have ISA functions (80%)
visual-enhancements.ts:100 [Enhancement] Enhancing connections...
visual-enhancements.ts:106 [Enhancement] Inferring missing connections via control loops...
visual-enhancements.ts:110 [Enhancement] Found 80 inferred control loop connections
visual-enhancements.ts:115 [Enhancement] Tracing physical connection paths...
visual-enhancements.ts:132 [Enhancement] Validating connections...
visual-enhancements.ts:138  [Enhancement] Connection validation found 4 issues (0 errors, 4 warnings)
enhanceVisualAnalysis @ visual-enhancements.ts:138
analyzeVisual @ visual.ts:98
visual-enhancements.ts:144 [Enhancement] Auto-correcting connection type mismatches...
connection-engine.ts:932  Correcting connection type: 1767728642568-42oqzhwru from 'electric' to 'electric_signal'
(anonymous) @ connection-engine.ts:932
validateAndCorrectConnectionTypes @ connection-engine.ts:921
enhanceVisualAnalysis @ visual-enhancements.ts:145
analyzeVisual @ visual.ts:98
connection-engine.ts:932  Correcting connection type: 1767728642568-81dvj6c7e from 'electric' to 'electric_signal'
(anonymous) @ connection-engine.ts:932
validateAndCorrectConnectionTypes @ connection-engine.ts:921
enhanceVisualAnalysis @ visual-enhancements.ts:145
analyzeVisual @ visual.ts:98
connection-engine.ts:932  Correcting connection type: 1767728642568-obg05chej from 'electric' to 'electric_signal'
(anonymous) @ connection-engine.ts:932
validateAndCorrectConnectionTypes @ connection-engine.ts:921
enhanceVisualAnalysis @ visual-enhancements.ts:145
analyzeVisual @ visual.ts:98
connection-engine.ts:932  Correcting connection type: 1767728642568-ore301t9r from 'electric' to 'control_signal'
(anonymous) @ connection-engine.ts:932
validateAndCorrectConnectionTypes @ connection-engine.ts:921
enhanceVisualAnalysis @ visual-enhancements.ts:145
analyzeVisual @ visual.ts:98
visual-enhancements.ts:152 [Enhancement] Detecting control loops...
visual-enhancements.ts:154 [Enhancement] Detected 5 control loops
visual-enhancements.ts:158 [Enhancement] Post-processing complete in 14ms
visual.ts:109 [Visual Pipeline] Quality Score: 0.92
index.ts:34 Pipeline execution complete
index.ts:34 ["Analysis complete:",{"document_id":"1767728532541-e5jomssi5","type":"SCHEMATIC","processing_time_ms":110054,"components":45}]
BlueprintWorkspace.tsx:180 Stage 1 (Visual Analysis) complete: {document_id: '1767728532541-e5jomssi5', document_type: 'SCHEMATIC', file_name: 'current-image', timestamp: 1767728642595, classification: {…}, …}cache_hit: falseclassification: confidence: 1reasoning: "The document clearly displays numerous instrumentation symbols (circles, diamonds, and other standard P&ID symbols) and process flow lines, which are characteristic of a P&ID or control logic diagram. This directly matches the primary criterion for a SCHEMATIC classification."type: "SCHEMATIC"[[Prototype]]: Objectdocument_id: "1767728532541-e5jomssi5"document_type: "SCHEMATIC"file_name: "current-image"processing_time_ms: 110054timestamp: 1767728642595visual: components: Array(45)0: {id: 'RV-025', type: 'valve_pressure_relief', label: 'RV 025', bbox: Array(4), confidence: 1, …}1: {id: 'GV-025-1', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}2: {id: 'GV-025-2', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}3: {id: 'GV-CSO-FP-1', type: 'valve_gate', label: 'CSO FP', bbox: Array(4), confidence: 1, …}4: {id: 'GV-CSO-FP-2', type: 'valve_gate', label: 'CSO FP', bbox: Array(4), confidence: 1, …}5: {id: 'GV-2-1', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}6: {id: 'GV-2-2', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}7: {id: 'RV-024', type: 'valve_pressure_relief', label: 'RV 024', bbox: Array(4), confidence: 1, …}8: {id: 'GV-024-1', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}9: {id: 'GV-024-2', type: 'valve_gate', label: '2"', bbox: Array(4), confidence: 1, …}10: {id: 'GV-CSO-FP-3', type: 'valve_gate', label: 'CSO FP', bbox: Array(4), confidence: 1, …}11: {id: 'GV-CSO-FP-4', type: 'valve_gate', label: 'CSO FP', bbox: Array(4), confidence: 1, …}12: {id: 'PC-111', type: 'instrument_controller', label: 'PC 111', bbox: Array(4), confidence: 1, …}13: {id: 'PT-111', type: 'sensor_pressure', label: 'PT 111', bbox: Array(4), confidence: 1, …}14: {id: 'FYE-001', type: 'instrument_transmitter', label: 'FYE 001', bbox: Array(4), confidence: 1, …}15: {id: 'E-001', type: 'sensor_primary_element', label: 'E 001', bbox: Array(4), confidence: 1, …}16: {id: 'FV-001', type: 'valve_control', label: 'FV 001', bbox: Array(4), confidence: 1, …}17: {id: 'FX-001', type: 'instrument_function', label: 'FX 001', bbox: Array(4), confidence: 1, …}18: {id: 'FC-001', type: 'instrument_controller', label: 'FC 001', bbox: Array(4), confidence: 1, …}19: {id: 'FT-001', type: 'sensor_flow', label: 'FT 001', bbox: Array(4), confidence: 1, …}20: {id: 'TT-001', type: 'sensor_temperature', label: 'TT 001', bbox: Array(4), confidence: 1, …}21: {id: 'FT-427', type: 'sensor_flow', label: 'FT 427', bbox: Array(4), confidence: 1, …}22: {id: 'FV-427', type: 'valve_control', label: 'FV 427', bbox: Array(4), confidence: 1, …}23: {id: 'FC-427', type: 'instrument_controller', label: 'FC 427', bbox: Array(4), confidence: 1, …}24: {id: 'GV-NC-1', type: 'valve_gate', label: 'NC', bbox: Array(4), confidence: 1, …}25: {id: 'GV-NNF', type: 'valve_gate', label: 'NNF', bbox: Array(4), confidence: 1, …}26: {id: 'GV-V2', type: 'valve_gate', label: 'V2"', bbox: Array(4), confidence: 1, …}27: {id: 'GV-NC-2', type: 'valve_gate', label: 'NC', bbox: Array(4), confidence: 1, …}28: {id: 'GV-MIN', type: 'valve_gate', label: 'MIN', bbox: Array(4), confidence: 1, …}29: {id: 'GV-UNREADABLE-1', type: 'valve_gate', label: 'UNREADABLE', bbox: Array(4), confidence: 0.8, …}30: {id: 'GV-UNREADABLE-2', type: 'valve_gate', label: 'UNREADABLE', bbox: Array(4), confidence: 0.8, …}31: {id: 'GV-UNREADABLE-3', type: 'valve_gate', label: 'UNREADABLE', bbox: Array(4), confidence: 0.8, …}32: {id: 'GV-UNREADABLE-4', type: 'valve_gate', label: 'UNREADABLE', bbox: Array(4), confidence: 0.8, …}33: {id: 'ET-50-1', type: 'equipment_tag', label: 'ET 50', bbox: Array(4), confidence: 1, …}34: {id: 'ET-50-2', type: 'equipment_tag', label: 'ET 50', bbox: Array(4), confidence: 1, …}35: {id: 'ET-50-3', type: 'equipment_tag', label: 'ET 50', bbox: Array(4), confidence: 1, …}36: {id: 'ET-50-4', type: 'equipment_tag', label: 'ET 50', bbox: Array(4), confidence: 1, …}37: {id: 'ET-10-1', type: 'equipment_tag', label: 'ET 10', bbox: Array(4), confidence: 1, …}38: {id: 'ET-10-2', type: 'equipment_tag', label: 'ET 10', bbox: Array(4), confidence: 1, …}39: {id: 'PUMP-AUTO-START-001', type: 'logic_function', label: '001', bbox: Array(4), confidence: 1, …}40: {id: 'OPL3-411-117', type: 'logic_function', label: 'OPL3 411-117', bbox: Array(4), confidence: 1, …}41: {id: 'HIGH-PRESS-OVERRIDE-001', type: 'logic_function', label: '001', bbox: Array(4), confidence: 1, …}42: {id: 'LINE-CONT-DILUTED-BITUMEN', type: 'line_continuation', label: 'DILUTED BITUMEN 411-049', bbox: Array(4), confidence: 1, …}43: {id: 'LINE-CONT-LGO-NAPHTHA', type: 'line_continuation', label: 'LGO/NAPHTHA LGO 411-118', bbox: Array(4), confidence: 1, …}44: {id: 'PROCESS-LABEL-PUMP-MIN-FLOW', type: 'pump', label: 'PUMP MINIMUM FLOW', bbox: Array(4), confidence: 1, …}length: 45[[Prototype]]: Array(0)connections: Array(105)[0 … 99]0: {id: '1767728642568-96ax93y6k', from_id: 'RV-025', to_id: 'GV-025-1', type: 'process_flow', confidence: 1, …}1: {id: '1767728642568-2gb8c7a3e', from_id: 'GV-025-1', to_id: 'GV-025-2', type: 'process_flow', confidence: 1, …}2: {id: '1767728642568-yjmxsf21l', from_id: 'GV-CSO-FP-1', to_id: 'GV-CSO-FP-2', type: 'process_flow', confidence: 1, …}3: {id: '1767728642568-rhoco36ua', from_id: 'GV-2-1', to_id: 'GV-2-2', type: 'process_flow', confidence: 1, …}4: {id: '1767728642568-5iufo6kg6', from_id: 'RV-024', to_id: 'GV-024-1', type: 'process_flow', confidence: 1, …}5: {id: '1767728642568-6ydjjr1ay', from_id: 'GV-024-1', to_id: 'GV-024-2', type: 'process_flow', confidence: 1, …}6: {id: '1767728642568-yj26lf1yj', from_id: 'GV-CSO-FP-3', to_id: 'GV-CSO-FP-4', type: 'process_flow', confidence: 1, …}7: {id: '1767728642568-42oqzhwru', from_id: 'PT-111', to_id: 'PC-111', type: 'electric_signal', confidence: 1, …}8: {id: '1767728642568-20us2ovt3', from_id: 'PC-111', to_id: 'PUMP-AUTO-START-001', type: 'electric', confidence: 1, …}9: {id: '1767728642568-c9t8gp4tm', from_id: 'E-001', to_id: 'FYE-001', type: 'electric', confidence: 1, …}10: {id: '1767728642568-v1bnq7zb5', from_id: 'FYE-001', to_id: 'FV-001', type: 'electric', confidence: 1, …}11: {id: '1767728642568-e4r9nhgqn', from_id: 'FV-001', to_id: 'FX-001', type: 'electric', confidence: 1, …}12: {id: '1767728642568-zc12m4trp', from_id: 'FX-001', to_id: 'FC-001', type: 'electric', confidence: 1, …}13: {id: '1767728642568-81dvj6c7e', from_id: 'FT-001', to_id: 'FC-001', type: 'electric_signal', confidence: 1, …}14: {id: '1767728642568-obg05chej', from_id: 'FT-427', to_id: 'FC-427', type: 'electric_signal', confidence: 1, …}15: {id: '1767728642568-ore301t9r', from_id: 'FC-427', to_id: 'FV-427', type: 'control_signal', confidence: 1, …}16: {id: '1767728642568-utzhuqx2n', from_id: 'FV-427', to_id: 'GV-NC-1', type: 'process_flow', confidence: 1, …}17: {id: '1767728642568-lcmvj7gnk', from_id: 'GV-NC-1', to_id: 'GV-NNF', type: 'process_flow', confidence: 1, …}18: {id: '1767728642568-ek4ar50ni', from_id: 'GV-NNF', to_id: 'GV-V2', type: 'process_flow', confidence: 1, …}19: {id: '1767728642568-t52zx9ypg', from_id: 'GV-V2', to_id: 'GV-NC-2', type: 'process_flow', confidence: 1, …}20: {id: '1767728642568-va1i9d84n', from_id: 'GV-NC-2', to_id: 'GV-MIN', type: 'process_flow', confidence: 1, …}21: {id: '1767728642568-a1s137to5', from_id: 'GV-MIN', to_id: 'GV-UNREADABLE-1', type: 'process_flow', confidence: 1, …}22: {id: '1767728642568-e5vqwngns', from_id: 'GV-UNREADABLE-1', to_id: 'GV-UNREADABLE-2', type: 'process_flow', confidence: 1, …}23: {id: '1767728642568-2ljf61y67', from_id: 'GV-UNREADABLE-2', to_id: 'GV-UNREADABLE-3', type: 'process_flow', confidence: 1, …}24: {id: '1767728642568-7m2whcv6y', from_id: 'GV-UNREADABLE-3', to_id: 'GV-UNREADABLE-4', type: 'process_flow', confidence: 1, …}25: {id: 'inferred-PT-111-FC-001', from_id: 'PT-111', to_id: 'FC-001', type: 'electric_signal', confidence: 0.85, …}26: {id: 'inferred-PT-111-FC-427', from_id: 'PT-111', to_id: 'FC-427', type: 'electric_signal', confidence: 0.85, …}27: {id: 'inferred-E-001-PC-111', from_id: 'E-001', to_id: 'PC-111', type: 'electric_signal', confidence: 0.85, …}28: {id: 'inferred-E-001-FC-001', from_id: 'E-001', to_id: 'FC-001', type: 'electric_signal', confidence: 0.85, …}29: {id: 'inferred-E-001-FC-427', from_id: 'E-001', to_id: 'FC-427', type: 'electric_signal', confidence: 0.85, …}30: {id: 'inferred-FT-001-PC-111', from_id: 'FT-001', to_id: 'PC-111', type: 'electric_signal', confidence: 0.85, …}31: {id: 'inferred-FT-001-FC-427', from_id: 'FT-001', to_id: 'FC-427', type: 'electric_signal', confidence: 0.85, …}32: {id: 'inferred-TT-001-PC-111', from_id: 'TT-001', to_id: 'PC-111', type: 'electric_signal', confidence: 0.85, …}33: {id: 'inferred-TT-001-FC-001', from_id: 'TT-001', to_id: 'FC-001', type: 'electric_signal', confidence: 0.85, …}34: {id: 'inferred-TT-001-FC-427', from_id: 'TT-001', to_id: 'FC-427', type: 'electric_signal', confidence: 0.85, …}35: {id: 'inferred-FT-427-PC-111', from_id: 'FT-427', to_id: 'PC-111', type: 'electric_signal', confidence: 0.85, …}36: {id: 'inferred-FT-427-FC-001', from_id: 'FT-427', to_id: 'FC-001', type: 'electric_signal', confidence: 0.85, …}37: {id: 'inferred-PC-111-RV-025', from_id: 'PC-111', to_id: 'RV-025', type: 'control_signal', confidence: 0.82, …}38: {id: 'inferred-PC-111-GV-025-1', from_id: 'PC-111', to_id: 'GV-025-1', type: 'control_signal', confidence: 0.82, …}39: {id: 'inferred-PC-111-GV-025-2', from_id: 'PC-111', to_id: 'GV-025-2', type: 'control_signal', confidence: 0.82, …}40: {id: 'inferred-PC-111-GV-CSO-FP-1', from_id: 'PC-111', to_id: 'GV-CSO-FP-1', type: 'control_signal', confidence: 0.82, …}41: {id: 'inferred-PC-111-GV-CSO-FP-2', from_id: 'PC-111', to_id: 'GV-CSO-FP-2', type: 'control_signal', confidence: 0.82, …}42: {id: 'inferred-PC-111-GV-2-1', from_id: 'PC-111', to_id: 'GV-2-1', type: 'control_signal', confidence: 0.82, …}43: {id: 'inferred-PC-111-GV-2-2', from_id: 'PC-111', to_id: 'GV-2-2', type: 'control_signal', confidence: 0.82, …}44: {id: 'inferred-PC-111-RV-024', from_id: 'PC-111', to_id: 'RV-024', type: 'control_signal', confidence: 0.82, …}45: {id: 'inferred-PC-111-GV-024-1', from_id: 'PC-111', to_id: 'GV-024-1', type: 'control_signal', confidence: 0.82, …}46: {id: 'inferred-PC-111-GV-024-2', from_id: 'PC-111', to_id: 'GV-024-2', type: 'control_signal', confidence: 0.82, …}47: {id: 'inferred-PC-111-GV-CSO-FP-3', from_id: 'PC-111', to_id: 'GV-CSO-FP-3', type: 'control_signal', confidence: 0.82, …}48: {id: 'inferred-PC-111-GV-CSO-FP-4', from_id: 'PC-111', to_id: 'GV-CSO-FP-4', type: 'control_signal', confidence: 0.82, …}49: {id: 'inferred-PC-111-FV-001', from_id: 'PC-111', to_id: 'FV-001', type: 'control_signal', confidence: 0.82, …}50: {id: 'inferred-PC-111-FV-427', from_id: 'PC-111', to_id: 'FV-427', type: 'control_signal', confidence: 0.82, …}51: {id: 'inferred-PC-111-GV-NC-1', from_id: 'PC-111', to_id: 'GV-NC-1', type: 'control_signal', confidence: 0.82, …}52: {id: 'inferred-PC-111-GV-NNF', from_id: 'PC-111', to_id: 'GV-NNF', type: 'control_signal', confidence: 0.82, …}53: {id: 'inferred-PC-111-GV-V2', from_id: 'PC-111', to_id: 'GV-V2', type: 'control_signal', confidence: 0.82, …}54: {id: 'inferred-PC-111-GV-NC-2', from_id: 'PC-111', to_id: 'GV-NC-2', type: 'control_signal', confidence: 0.82, …}55: {id: 'inferred-PC-111-GV-MIN', from_id: 'PC-111', to_id: 'GV-MIN', type: 'control_signal', confidence: 0.82, …}56: {id: 'inferred-PC-111-GV-UNREADABLE-1', from_id: 'PC-111', to_id: 'GV-UNREADABLE-1', type: 'control_signal', confidence: 0.82, …}57: {id: 'inferred-PC-111-GV-UNREADABLE-2', from_id: 'PC-111', to_id: 'GV-UNREADABLE-2', type: 'control_signal', confidence: 0.82, …}58: {id: 'inferred-PC-111-GV-UNREADABLE-3', from_id: 'PC-111', to_id: 'GV-UNREADABLE-3', type: 'control_signal', confidence: 0.82, …}59: {id: 'inferred-PC-111-GV-UNREADABLE-4', from_id: 'PC-111', to_id: 'GV-UNREADABLE-4', type: 'control_signal', confidence: 0.82, …}60: {id: 'inferred-FC-001-RV-025', from_id: 'FC-001', to_id: 'RV-025', type: 'control_signal', confidence: 0.82, …}61: {id: 'inferred-FC-001-GV-025-1', from_id: 'FC-001', to_id: 'GV-025-1', type: 'control_signal', confidence: 0.82, …}62: {id: 'inferred-FC-001-GV-025-2', from_id: 'FC-001', to_id: 'GV-025-2', type: 'control_signal', confidence: 0.82, …}63: {id: 'inferred-FC-001-GV-CSO-FP-1', from_id: 'FC-001', to_id: 'GV-CSO-FP-1', type: 'control_signal', confidence: 0.82, …}64: {id: 'inferred-FC-001-GV-CSO-FP-2', from_id: 'FC-001', to_id: 'GV-CSO-FP-2', type: 'control_signal', confidence: 0.82, …}65: {id: 'inferred-FC-001-GV-2-1', from_id: 'FC-001', to_id: 'GV-2-1', type: 'control_signal', confidence: 0.82, …}66: {id: 'inferred-FC-001-GV-2-2', from_id: 'FC-001', to_id: 'GV-2-2', type: 'control_signal', confidence: 0.82, …}67: {id: 'inferred-FC-001-RV-024', from_id: 'FC-001', to_id: 'RV-024', type: 'control_signal', confidence: 0.82, …}68: {id: 'inferred-FC-001-GV-024-1', from_id: 'FC-001', to_id: 'GV-024-1', type: 'control_signal', confidence: 0.82, …}69: {id: 'inferred-FC-001-GV-024-2', from_id: 'FC-001', to_id: 'GV-024-2', type: 'control_signal', confidence: 0.82, …}70: {id: 'inferred-FC-001-GV-CSO-FP-3', from_id: 'FC-001', to_id: 'GV-CSO-FP-3', type: 'control_signal', confidence: 0.82, …}71: {id: 'inferred-FC-001-GV-CSO-FP-4', from_id: 'FC-001', to_id: 'GV-CSO-FP-4', type: 'control_signal', confidence: 0.82, …}72: {id: 'inferred-FC-001-FV-001', from_id: 'FC-001', to_id: 'FV-001', type: 'control_signal', confidence: 0.82, …}73: {id: 'inferred-FC-001-FV-427', from_id: 'FC-001', to_id: 'FV-427', type: 'control_signal', confidence: 0.82, …}74: {id: 'inferred-FC-001-GV-NC-1', from_id: 'FC-001', to_id: 'GV-NC-1', type: 'control_signal', confidence: 0.82, …}75: {id: 'inferred-FC-001-GV-NNF', from_id: 'FC-001', to_id: 'GV-NNF', type: 'control_signal', confidence: 0.82, …}76: {id: 'inferred-FC-001-GV-V2', from_id: 'FC-001', to_id: 'GV-V2', type: 'control_signal', confidence: 0.82, …}77: {id: 'inferred-FC-001-GV-NC-2', from_id: 'FC-001', to_id: 'GV-NC-2', type: 'control_signal', confidence: 0.82, …}78: {id: 'inferred-FC-001-GV-MIN', from_id: 'FC-001', to_id: 'GV-MIN', type: 'control_signal', confidence: 0.82, …}79: {id: 'inferred-FC-001-GV-UNREADABLE-1', from_id: 'FC-001', to_id: 'GV-UNREADABLE-1', type: 'control_signal', confidence: 0.82, …}80: {id: 'inferred-FC-001-GV-UNREADABLE-2', from_id: 'FC-001', to_id: 'GV-UNREADABLE-2', type: 'control_signal', confidence: 0.82, …}81: {id: 'inferred-FC-001-GV-UNREADABLE-3', from_id: 'FC-001', to_id: 'GV-UNREADABLE-3', type: 'control_signal', confidence: 0.82, …}82: {id: 'inferred-FC-001-GV-UNREADABLE-4', from_id: 'FC-001', to_id: 'GV-UNREADABLE-4', type: 'control_signal', confidence: 0.82, …}83: {id: 'inferred-FC-427-RV-025', from_id: 'FC-427', to_id: 'RV-025', type: 'control_signal', confidence: 0.82, …}84: {id: 'inferred-FC-427-GV-025-1', from_id: 'FC-427', to_id: 'GV-025-1', type: 'control_signal', confidence: 0.82, …}85: {id: 'inferred-FC-427-GV-025-2', from_id: 'FC-427', to_id: 'GV-025-2', type: 'control_signal', confidence: 0.82, …}86: {id: 'inferred-FC-427-GV-CSO-FP-1', from_id: 'FC-427', to_id: 'GV-CSO-FP-1', type: 'control_signal', confidence: 0.82, …}87: {id: 'inferred-FC-427-GV-CSO-FP-2', from_id: 'FC-427', to_id: 'GV-CSO-FP-2', type: 'control_signal', confidence: 0.82, …}88: {id: 'inferred-FC-427-GV-2-1', from_id: 'FC-427', to_id: 'GV-2-1', type: 'control_signal', confidence: 0.82, …}89: {id: 'inferred-FC-427-GV-2-2', from_id: 'FC-427', to_id: 'GV-2-2', type: 'control_signal', confidence: 0.82, …}90: {id: 'inferred-FC-427-RV-024', from_id: 'FC-427', to_id: 'RV-024', type: 'control_signal', confidence: 0.82, …}91: {id: 'inferred-FC-427-GV-024-1', from_id: 'FC-427', to_id: 'GV-024-1', type: 'control_signal', confidence: 0.82, …}92: {id: 'inferred-FC-427-GV-024-2', from_id: 'FC-427', to_id: 'GV-024-2', type: 'control_signal', confidence: 0.82, …}93: {id: 'inferred-FC-427-GV-CSO-FP-3', from_id: 'FC-427', to_id: 'GV-CSO-FP-3', type: 'control_signal', confidence: 0.82, …}94: {id: 'inferred-FC-427-GV-CSO-FP-4', from_id: 'FC-427', to_id: 'GV-CSO-FP-4', type: 'control_signal', confidence: 0.82, …}95: {id: 'inferred-FC-427-FV-001', from_id: 'FC-427', to_id: 'FV-001', type: 'control_signal', confidence: 0.82, …}96: {id: 'inferred-FC-427-GV-NC-1', from_id: 'FC-427', to_id: 'GV-NC-1', type: 'control_signal', confidence: 0.82, …}97: {id: 'inferred-FC-427-GV-NNF', from_id: 'FC-427', to_id: 'GV-NNF', type: 'control_signal', confidence: 0.82, …}98: {id: 'inferred-FC-427-GV-V2', from_id: 'FC-427', to_id: 'GV-V2', type: 'control_signal', confidence: 0.82, …}99: {id: 'inferred-FC-427-GV-NC-2', from_id: 'FC-427', to_id: 'GV-NC-2', type: 'control_signal', confidence: 0.82, …}[100 … 104]100: {id: 'inferred-FC-427-GV-MIN', from_id: 'FC-427', to_id: 'GV-MIN', type: 'control_signal', confidence: 0.82, …}101: {id: 'inferred-FC-427-GV-UNREADABLE-1', from_id: 'FC-427', to_id: 'GV-UNREADABLE-1', type: 'control_signal', confidence: 0.82, …}102: {id: 'inferred-FC-427-GV-UNREADABLE-2', from_id: 'FC-427', to_id: 'GV-UNREADABLE-2', type: 'control_signal', confidence: 0.82, …}103: {id: 'inferred-FC-427-GV-UNREADABLE-3', from_id: 'FC-427', to_id: 'GV-UNREADABLE-3', type: 'control_signal', confidence: 0.82, …}104: {id: 'inferred-FC-427-GV-UNREADABLE-4', from_id: 'FC-427', to_id: 'GV-UNREADABLE-4', type: 'control_signal', confidence: 0.82, …}length: 105[[Prototype]]: Array(0)metadata: control_loops: Array(5)0: {id: 'loop-PT 111', name: 'PT Control Loop (PT 111)', components: Array(29), connections: Array(28), type: 'pt', …}1: {id: 'loop-E 001', name: 'E Control Loop (E 001)', components: Array(30), connections: Array(29), type: 'e', …}2: {id: 'loop-FT 001', name: 'FT Control Loop (FT 001)', components: Array(29), connections: Array(28), type: 'ft', …}3: {id: 'loop-TT 001', name: 'TT Control Loop (TT 001)', components: Array(29), connections: Array(28), type: 'tt', …}4: {id: 'loop-FT 427', name: 'FT Control Loop (FT 427)', components: Array(29), connections: Array(28), type: 'ft', …}length: 5[[Prototype]]: Array(0)enhancement: connection_inference_enabled: truecontrol_loops: 5enhancement_duration_ms: 14inferred_connections: 80isa_detection_enabled: trueisa_detection_rate: 0.8isa_functions_detected: 36loop_detection_enabled: trueorphaned_labels_merged: 0shape_validation_enabled: trueshape_violations_corrected: 0spatial_association_enabled: truevalidation_enabled: truevalidation_issues: 4[[Prototype]]: Objectprocess_log: "Detected 37 components including pressure relief valves, gate valves, control valves, various instruments (transmitters, controllers, functions), equipment tags, and logic functions. Identified 3 main control loops. Connections between components are primarily process flow lines and electrical signals."quality_metrics: confidence_avg: 0.9822222222222223connection_coverage: 1detection_quality: 0.9111111111111111isa_completeness: 0.8metrics: avg_confidence: 0.9822222222222223excellent_detections: 41isa_functions_detected: 36total_components: 45total_connections: 105[[Prototype]]: Objectoverall_score: 0.9224444444444445[[Prototype]]: Objecttotal_components: 45total_connections: 25validation_issues: Array(4)0: {connection: {…}, issue: 'Connection type mismatch: expected electric_signal, got electric', severity: 'warning'}1: {connection: {…}, issue: 'Connection type mismatch: expected electric_signal, got electric', severity: 'warning'}2: {connection: {…}, issue: 'Connection type mismatch: expected electric_signal, got electric', severity: 'warning'}3: {connection: {…}, issue: 'Connection type mismatch: expected control_signal, got electric', severity: 'warning'}length: 4[[Prototype]]: Array(0)[[Prototype]]: Object[[Prototype]]: Objectconstructor: ƒ Object()hasOwnProperty: ƒ hasOwnProperty()isPrototypeOf: ƒ isPrototypeOf()propertyIsEnumerable: ƒ propertyIsEnumerable()toLocaleString: ƒ toLocaleString()toString: ƒ toString()valueOf: ƒ valueOf()__defineGetter__: ƒ __defineGetter__()__defineSetter__: ƒ __defineSetter__()__lookupGetter__: ƒ __lookupGetter__()__lookupSetter__: ƒ __lookupSetter__()__proto__: (...)get __proto__: ƒ __proto__()set __proto__: ƒ __proto__()[[Prototype]]: Object
index.ts:155 [Stage 2] Starting background final analysis...
BlueprintWorkspace.tsx:217 [Stage 2] Starting background analysis...
index.ts:169 [Stage 2] Background analysis queued with job ID: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:237 [Stage 2] Background job queued: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:217 [Stage 2] Queuing background analysis on server...
BlueprintWorkspace.tsx:83 [Polling] Starting poll for job: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:151 [Polling] Cleanup: stopping poll
BlueprintWorkspace.tsx:83 [Polling] Starting poll for job: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:151 [Polling] Cleanup: stopping poll
BlueprintWorkspace.tsx:83 [Polling] Starting poll for job: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:151 [Polling] Cleanup: stopping poll
BlueprintWorkspace.tsx:83 [Polling] Starting poll for job: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:151 [Polling] Cleanup: stopping poll
BlueprintWorkspace.tsx:83 [Polling] Starting poll for job: analysis-job-1-1767728642849
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: processing
BlueprintWorkspace.tsx:90 [Polling] Checking project status: default
BlueprintWorkspace.tsx:99 [Polling] Project status: completed
BlueprintWorkspace.tsx:102 [Polling] Project completed! Setting final analysis report
BlueprintWorkspace.tsx:151 [Polling] Cleanup: stopping poll



